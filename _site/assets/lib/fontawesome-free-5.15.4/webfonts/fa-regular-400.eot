=function(Q){return function(e){var r=T(t.diagonalArrowDef[e],4),n=r[0],o=r[1],i=r[2];return[e+"arrow",{renderer:function(t,e){var r=T(t.arrowAW(),2),s=r[0],a=r[1],l=t.arrow(a,n*(s-o),i);Q(t,l)},bbox:function(Q){var t=Q.arrowData(),e=t.a,r=t.x,n=t.y,o=T([Q.arrowhead.x,Q.arrowhead.y,Q.arrowhead.dx],3),i=o[0],s=o[1],a=o[2],l=T(Q.getArgMod(i+a,s),2),c=l[0],u=l[1],L=n+(c>e?Q.thickness*u*Math.sin(c-e):0),p=r+(c>Math.PI/2-e?Q.thickness*u*Math.sin(c+e-Math.PI/2):0);return[L,p,L,p]},remove:r[3]}]}};t.CommonArrow=function(Q){return function(e){var r=T(t.arrowDef[e],4),n=r[0],o=r[1],i=r[2],s=r[3];return[e+"arrow",{renderer:function(t,e){var r=t.getBBox(),s=r.w,a=r.h,l=r.d,c=T(i?[a+l,"X"]:[s,"Y"],2),u=c[0],L=c[1],p=t.getOffset(L),h=t.arrow(u,n,o,L,p);Q(t,h)},bbox:t.arrowBBox[e],remove:s}]}}},3055:function(Q,t,T){var e,r=this&&this.__extends||(e=function(Q,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,t){Q.__proto__=t}||function(Q,t){for(var T in t)Object.prototype.hasOwnProperty.call(t,T)&&(Q[T]=t[T])})(Q,t)},function(Q,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function T(){this.constructor=Q}e(Q,t),Q.prototype=null===t?Object.create(t):(T.prototype=t.prototype,new T)}),n=this&&this.__assign||function(){return(n=Object.assign||function(Q){for(var t,T=1,e=arguments.length;T<e;T++)for(var r in t=arguments[T])Object.prototype.hasOwnProperty.call(t,r)&&(Q[r]=t[r]);return Q}).apply(this,arguments)},o=this&&this.__read||function(Q,t){var T="function"==typeof Symbol&&Q[Symbol.iterator];if(!T)return Q;var e,r,n=T.call(Q),o=[];try{for(;(void 0===t||t-- >0)&&!(e=n.next()).done;)o.push(e.value)}catch(Q){r={error:Q}}finally{try{e&&!e.done&&(T=n.return)&&T.call(n)}finally{if(r)throw r.error}}return o},i=this&&this.__values||function(Q){var t="function"==typeof Symbol&&Symbol.iterator,T=t&&Q[t],e=0;if(T)return T.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&e>=Q.length&&(Q=void 0),{value:Q&&Q[e++],done:!Q}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonOutputJax=void 0;var s=T(2975),a=T(4474),l=T(7233),c=T(6010),u=T(8054),L=T(4139),p=function(Q){function t(t,T,e){void 0===t&&(t=null),void 0===T&&(T=null),void 0===e&&(e=null);var r=this,n=o(l.separateOptions(t,e.OPTIONS),2),i=n[0],s=n[1];return(r=Q.call(this,i)||this).factory=r.options.wrapperFactory||new T,r.factory.jax=r,r.cssStyles=r.options.cssStyles||new L.CssStyles,r.font=r.options.font||new e(s),r.unknownCache=new Map,r}return r(t,Q),t.prototype.typeset=function(Q,t){this.setDocument(t);var T=this.createNode();return this.toDOM(Q,T,t),T},t.prototype.createNode=function(){var Q=this.constructor.NAME;return this.html("mjx-container",{class:"MathJax",jax:Q})},t.prototype.setScale=function(Q){var t=this.math.metrics.scale*this.options.scale;1!==t&&this.adaptor.setStyle(Q,"fontSize",c.percent(t))},t.prototype.toDOM=function(Q,t,T){void 0===T&&(T=null),this.setDocument(T),this.math=Q,this.pxPerEm=Q.metrics.ex/this.font.params.x_height,Q.root.setTeXclass(null),this.setScale(t),this.nodeMap=new Map,this.container=t,this.processMath(Q.root,t),this.nodeMap=null,this.executeFilters(this.postFilters,Q,T,t)},t.prototype.getBBox=function(Q,t){this.setDocument(t),this.math=Q,Q.root.setTeXclass(null),this.nodeMap=new Map;var T=this.factory.wrap(Q.root).getBBox();return this.nodeMap=null,T},t.prototype.getMetrics=function(Q){var t,T;this.setDocument(Q);var e=this.adaptor,r=this.getMetricMaps(Q);try{for(var n=i(Q.math),o=n.next();!o.done;o=n.next()){var s=o.value,l=e.parent(s.start.node);if(s.state()<a.STATE.METRICS&&l){var c=r[s.display?1:0].get(l),u=c.em,L=c.ex,p=c.containerWidth,h=c.lineWidth,f=c.scale,d=c.family;s.setMetrics(u,L,p,h,f),this.options.mtextInheritFont&&(s.outputData.mtextFamily=d),this.options.merrorInheritFont&&(s.outputData.merrorFamily=d),s.state(a.STATE.METRICS)}}}catch(Q){t={error:Q}}finally{try{o&&!o.done&&(T=n.return)&&T.call(n)}finally{if(t)throw t.error}}},t.prototype.getMetricsFor=function(Q,t){var T=this.options.mtextInheritFont||this.options.merrorInheritFont,e=this.getTestElement(Q,t),r=this.measureMetrics(e,T);return this.adaptor.remove(e),r},t.prototype.getMetricMaps=function(Q){var t,T,e,r,n,o,s,l,c,u,L=this.adaptor,p=[new Map,new Map];try{for(var h=i(Q.math),f=h.next();!f.done;f=h.next()){var d=f.value;if((O=L.parent(d.start.node))&&d.state()<a.STATE.METRICS){var H=p[d.display?1:0];H.has(O)||H.set(O,this.getTestElement(O,d.display))}}}catch(Q){t={error:Q}}finally{try{f&&!f.done&&(T=h.return)&&T.call(h)}finally{if(t)throw t.error}}var y=this.options.mtextInheritFont||this.options.merrorInheritFont,m=[new Map,new Map];try{for(var V=i(m.keys()),v=V.next();!v.done;v=V.next()){var M=v.value;try{for(var b=(n=void 0,i(p[M].keys())),g=b.next();!g.done;g=b.next()){var O=g.value;m[M].set(O,this.measureMetrics(p[M].get(O),y))}}catch(Q){n={error:Q}}finally{try{g&&!g.done&&(o=b.return)&&o.call(b)}finally{if(n)throw n.error}}}}catch(Q){e={error:Q}}finally{try{v&&!v.done&&(r=V.return)&&r.call(V)}finally{if(e)throw e.error}}try{for(var x=i(m.keys()),_=x.next();!_.done;_=x.next()){M=_.value;try{for(var E=(c=void 0,i(p[M].values())),S=E.next();!S.done;S=E.next()){O=S.value;L.remove(O)}}catch(Q){c={error:Q}}finally{try{S&&!S.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}}}catch(Q){s={error:Q}}finally{try{_&&!_.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}return m},t.prototype.getTestElement=function(Q,t){var T=this.adaptor;if(!this.testInline){this.testInline=this.html("mjx-test",{style:{display:"inline-block",width:"100%","font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","text-indent":0,"text-transform":"none","letter-spacing":"normal","word-spacing":"normal",overflow:"hidden",height:"1px","margin-right":"-1px"}},[this.html("mjx-left-box",{style:{display:"inline-block",width:0,float:"left"}}),this.html("mjx-ex-box",{style:{position:"absolute",overflow:"hidden",width:"1px",height:"60ex"}}),this.html("mjx-right-box",{style:{display:"inline-block",width:0,float:"right"}})]),this.testDisplay=T.clone(this.testInline),T.setStyle(this.testDisplay,"display","table"),T.setStyle(this.testDisplay,"margin-right",""),T.setStyle(T.firstChild(this.testDisplay),"display","none");var e=T.lastChild(this.testDisplay);T.setStyle(e,"display","table-cell"),T.setStyle(e,"width","10000em"),T.setStyle(e,"float","")}return T.append(Q,T.clone(t?this.testDisplay:this.testInline))},t.prototype.measureMetrics=function(Q,t){var T=this.adaptor,e=t?T.fontFamily(Q):"",r=T.fontSize(Q),n=o(T.nodeSize(T.childNode(Q,1)),2),i=n[0],s=n[1],a=i?s/60:r*this.options.exFactor;return{em:r,ex:a,containerWidth:i?"table"===T.getStyle(Q,"display")?T.nodeSize(T.lastChild(Q))[0]-1:T.nodeBBox(T.lastChild(Q)).left-T.nodeBBox(T.firstChild(Q)).left-2:1e6,lineWidth:1e6,scale:Math.max(this.options.minScale,this.options.matchFontHeight?a/this.font.params.x_height/r:1),family:e}},t.prototype.styleSheet=function(Q){var t,T;if(this.setDocument(Q),this.cssStyles.clear(),this.cssStyles.addStyles(this.constructor.commonStyles),"getStyles"in Q)try{for(var e=i(Q.getStyles()),r=e.next();!r.done;r=e.next()){var n=r.value;this.cssStyles.addStyles(n)}}catch(Q){t={error:Q}}finally{try{r&&!r.done&&(T=e.return)&&T.call(e)}finally{if(t)throw t.error}}return this.addWrapperStyles(this.cssStyles),this.addFontStyles(this.cssStyles),this.html("style",{id:"MJX-styles"},[this.text("\n"+this.cssStyles.cssText+"\n")])},t.prototype.addFontStyles=function(Q){Q.addStyles(this.font.styles)},t.prototype.addWrapperStyles=function(Q){var t,T;try{for(var e=i(this.factory.getKinds()),r=e.next();!r.done;r=e.next()){var n=r.value;this.addClassStyles(this.factory.getNodeClass(n),Q)}}catch(Q){t={error:Q}}finally{try{r&&!r.done&&(T=e.return)&&T.call(e)}finally{if(t)throw t.error}}},t.prototype.addClassStyles=function(Q,t){t.addStyles(Q.styles)},t.prototype.setDocument=function(Q){Q&&(this.document=Q,this.adaptor.document=Q.document)},t.prototype.html=function(Q,t,T,e){return void 0===t&&(t={}),void 0===T&&(T=[]),this.adaptor.node(Q,t,T,e)},t.prototype.text=function(Q){return this.adaptor.text(Q)},t.prototype.fixed=function(Q,t){return void 0===t&&(t=3),Math.abs(Q)<6e-4?"0":Q.toFixed(t).replace(/\.?0+$/,"")},t.prototype.measureText=function(Q,t,T){void 0===T&&(T=["",!1,!1]);var e=this.unknownText(Q,t);if("-explicitFont"===t){var r=this.cssFontStyles(T);this.adaptor.setAttributes(e,{style:r})}return this.measureTextNodeWithCache(e,Q,t,T)},t.prototype.measureTextNodeWithCache=function(Q,t,T,e){void 0===e&&(e=["",!1,!1]),"-explicitFont"===T&&(T=[e[0],e[1]?"T":"F",e[2]?"T":"F",""].join("-")),this.unknownCache.has(T)||this.unknownCache.set(T,new Map);var r=this.unknownCache.get(T),n=r.get(t);if(n)return n;var o=this.measureTextNode(Q);return r.set(t,o),o},t.prototype.measureXMLnode=function(Q){var t=this.adaptor,T=this.html("mjx-xml-block",{style:{display:"inline-block"}},[t.clone(Q)]),e=this.html("mjx-baseline",{style:{display:"inline-block",width:0,height:0}}),r=this.html("mjx-measure-xml",{style:{position:"absolute",display:"inline-block","font-family":"initial","line-height":"normal"}},[e,T]);t.append(t.parent(this.math.start.node),this.container),t.append(this.container,r);var n=this.math.metrics.em*this.math.metrics.scale,o=t.nodeBBox(T),i=o.left,s=o.right,a=o.bottom,l=o.top,c=(s-i)/n,u=(t.nodeBBox(e).top-l)/n,L=(a-l)/n-u;return t.remove(this.container),t.remove(r),{w:c,h:u,d:L}},t.prototype.cssFontStyles=function(Q,t){void 0===t&&(t={});var T=o(Q,3),e=T[0],r=T[1],n=T[2];return t["font-family"]=this.font.getFamily(e),r&&(t["font-style"]="italic"),n&&(t["font-weight"]="bold"),t},t.prototype.getFontData=function(Q){return Q||(Q=new u.Styles),[this.font.getFamily(Q.get("font-family")),"italic"===Q.get("font-style"),"bold"===Q.get("font-weight")]},t.NAME="Common",t.OPTIONS=n(n({},s.AbstractOutputJax.OPTIONS),{scale:1,minScale:.5,mtextInheritFont:!1,merrorInheritFont:!1,mtextFont:"",merrorFont:"serif",mathmlSpacing:!1,skipAttributes:{},exFactor:.5,displayAlign:"center",displayIndent:"0",wrapperFactory:null,font:null,cssStyles:null}),t.commonStyles={},t}(s.AbstractOutputJax);t.CommonOutputJax=p},7519:function(Q,t,T){var e,r=this&&this.__extends||(e=function(Q,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,t){Q.__proto__=t}||function(Q,t){for(var T in t)Object.prototype.hasOwnProperty.call(t,T)&&(Q[T]=t[T])})(Q,t)},function(Q,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function T(){this.constructor=Q}e(Q,t),Q.prototype=null===t?Object.create(t):(T.prototype=t.prototype,new T)}),n=this&&this.__values||function(Q){var t="function"==typeof Symbol&&Symbol.iterator,T=t&&Q[t],e=0;if(T)return T.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&e>=Q.length&&(Q=void 0),{value:Q&&Q[e++],done:!Q}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(Q,t){var T="function"==typeof Symbol&&Q[Symbol.iterator];if(!T)return Q;var e,r,n=T.call(Q),o=[];try{for(;(void 0===t||t-- >0)&&!(e=n.next()).done;)o.push(e.value)}catch(Q){r={error:Q}}finally{try{e&&!e.done&&(T=n.return)&&T.call(n)}finally{if(r)throw r.error}}return o},i=this&&this.__spreadArray||function(Q,t){for(var T=0,e=t.length,r=Q.length;T<e;T++,r++)Q[r]=t[T];return Q};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonWrapper=void 0;var s=T(8912),a=T(9007),l=T(505),c=T(6010),u=T(8054),L=T(6469),p=T(5884),h=2/18;function f(Q,t){return Q?t<h?0:h:t}var d=function(Q){function t(t,T,e){void 0===e&&(e=null);var r=Q.call(this,t,T)||this;return r.parent=null,r.removedStyles=null,r.styles=null,r.variant="",r.bboxComputed=!1,r.stretch=p.NOSTRETCH,r.font=null,r.parent=e,r.font=t.jax.font,r.bbox=L.BBox.zero(),r.getStyles(),r.getVariant(),r.getScale(),r.getSpace(),r.childNodes=T.childNodes.map((function(Q){var t=r.wrap(Q);return t.bbox.pwidth&&(T.notParent||T.isKind("math"))&&(r.bbox.pwidth=L.BBox.fullWidth),t})),r}return r(t,Q),Object.defineProperty(t.prototype,"jax",{get:function(){return this.factory.jax},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adaptor",{get:function(){return this.factory.jax.adaptor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metrics",{get:function(){return this.factory.jax.math.metrics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fixesPWidth",{get:function(){return!this.node.notParent&&!this.node.isToken},enumerable:!1,configurable:!0}),t.prototype.wrap=function(Q,t){void 0===t&&(t=null);var T=this.factory.wrap(Q,t||this);return t&&t.childNodes.push(T),this.jax.nodeMap.set(Q,T),T},t.prototype.getBBox=function(Q){if(void 0===Q&&(Q=!0),this.bboxComputed)return this.bbox;var t=Q?this.bbox:L.BBox.zero();return this.computeBBox(t),this.bboxComputed=Q,t},t.prototype.computeBBox=function(Q,t){var T,e;void 0===t&&(t=!1),Q.empty();try{for(var r=n(this.childNodes),o=r.next();!o.done;o=r.next()){var i=o.value;Q.append(i.getBBox())}}catch(Q){T={error:Q}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(T)throw T.error}}Q.clean(),this.fixesPWidth&&this.setChildPWidths(t)&&this.computeBBox(Q,!0)},t.prototype.setChildPWidths=function(Q,t,T){var e,r;if(void 0===t&&(t=null),void 0===T&&(T=!0),Q)return!1;T&&(this.bbox.pwidth="");var o=!1;try{for(var i=n(this.childNodes),s=i.next();!s.done;s=i.next()){var a=s.value,l=a.getBBox();l.pwidth&&a.setChildPWidths(Q,null===t?l.w:t,T)&&(o=!0)}}catch(Q){e={error:Q}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return o},t.prototype.invalidateBBox=function(){this.bboxComputed&&(this.bboxComputed=!1,this.parent&&this.parent.invalidateBBox())},t.prototype.copySkewIC=function(Q){var t=this.childNodes[0];(null==t?void 0:t.bbox.sk)&&(Q.sk=t.bbox.sk),(null==t?void 0:t.bbox.dx)&&(Q.dx=t.bbox.dx);var T=this.childNodes[this.childNodes.length-1];(null==T?void 0:T.bbox.ic)&&(Q.ic=T.bbox.ic,Q.w+=Q.ic)},t.prototype.getStyles=function(){var Q=this.node.attributes.getExplicit("style");if(Q)for(var T=this.styles=new u.Styles(Q),e=0,r=t.removeStyles.length;e<r;e++){var n=t.removeStyles[e];T.get(n)&&(this.removedStyles||(this.removedStyles={}),this.removedStyles[n]=T.get(n),T.set(n,""))}},t.prototype.getVariant=function(){if(this.node.isToken){var Q=this.node.attributes,T=Q.get("mathvariant");if(!Q.getExplicit("mathvariant")){var e=Q.getList("fontfamily","fontweight","fontstyle");if(this.removedStyles){var r=this.removedStyles;r.fontFamily&&(e.family=r.fontFamily),r.fontWeight&&(e.weight=r.fontWeight),r.fontStyle&&(e.style=r.fontStyle)}e.fontfamily&&(e.family=e.fontfamily),e.fontweight&&(e.weight=e.fontweight),e.fontstyle&&(e.style=e.fontstyle),e.weight&&e.weight.match(/^\d+$/)&&(e.weight=parseInt(e.weight)>600?"bold":"normal"),e.family?T=this.explicitVariant(e.family,e.weight,e.style):(this.node.getProperty("variantForm")&&(T="-tex-variant"),T=(t.BOLDVARIANTS[e.weight]||{})[T]||T,T=(t.ITALICVARIANTS[e.style]||{})[T]||T)}this.variant=T}},t.prototype.explicitVariant=function(Q,t,T){var e=this.styles;return e||(e=this.styles=new u.Styles),e.set("fontFamily",Q),t&&e.set("fontWeight",t),T&&e.set("fontStyle",T),"-explicitFont"},t.prototype.getScale=function(){var Q=1,t=this.parent,T=t?t.bbox.scale:1,e=this.node.attributes,r=Math.min(e.get("scriptlevel"),2),n=e.get("fontsize"),o=this.node.isToken||this.node.isKind("mstyle")?e.get("mathsize"):e.getInherited("mathsize");if(0!==r){Q=Math.pow(e.get("scriptsizemultiplier"),r);var i=this.length2em(e.get("scriptminsize"),.8,1);Q<i&&(Q=i)}this.removedStyles&&this.removedStyles.fontSize&&!n&&(n=this.removedStyles.fontSize),n&&!e.getExplicit("mathsize")&&(o=n),"1"!==o&&(Q*=this.length2em(o,1,1)),this.bbox.scale=Q,this.bbox.rscale=Q/T},t.prototype.getSpace=function(){var Q=this.isTopEmbellished(),t=this.node.hasSpacingAttributes();this.jax.options.mathmlSpacing||t?Q&&this.getMathMLSpacing():this.getTeXSpacing(Q,t)},t.prototype.getMathMLSpacing=function(){var Q=this.node.coreMO(),t=Q.coreParent(),T=t.parent;if(T&&T.isKind("mrow")&&1!==T.childNodes.length){var e=Q.attributes,r=e.get("scriptlevel")>0;this.bbox.L=e.isSet("lspace")?Math.max(0,this.length2em(e.get("lspace"))):f(r,Q.lspace),this.bbox.R=e.isSet("rspace")?Math.max(0,this.length2em(e.get("rspace"))):f(r,Q.rspace);var n=T.childIndex(t);if(0!==n){var o=T.childNodes[n-1];if(o.isEmbellished){var i=this.jax.nodeMap.get(o).getBBox();i.R&&(this.bbox.L=Math.max(0,this.bbox.L-i.R))}}}},t.prototype.getTeXSpacing=function(Q,t){if(!t){var T=this.node.texSpacing();T&&(this.bbox.L=this.length2em(T))}if(Q||t){var e=this.node.coreMO().attributes;e.isSet("lspace")&&(this.bbox.L=Math.max(0,this.length2em(e.get("lspace")))),e.isSet("rspace")&&(this.bbox.R=Math.max(0,this.length2em(e.get("rspace"))))}},t.prototype.isTopEmbellished=function(){return this.node.isEmbellished&&!(this.node.parent&&this.node.parent.isEmbellished)},t.prototype.core=function(){return this.jax.nodeMap.get(this.node.core())},t.prototype.coreMO=function(){return this.jax.nodeMap.get(this.node.coreMO())},t.prototype.getText=function(){var Q,t,T="";if(this.node.isToken)try{for(var e=n(this.node.childNodes),r=e.next();!r.done;r=e.next()){var o=r.value;o instanceof a.TextNode&&(T+=o.getText())}}catch(t){Q={error:t}}finally{try{r&&!r.done&&(t=e.return)&&t.call(e)}finally{if(Q)throw Q.error}}return T},t.prototype.canStretch=function(Q){if(this.stretch=p.NOSTRETCH,this.node.isEmbellished){var t=this.core();t&&t.node!==this.node&&t.canStretch(Q)&&(this.stretch=t.stretch)}return 0!==this.stretch.dir},t.prototype.getAlignShift=function(){var Q,t=(Q=this.node.attributes).getList.apply(Q,i([],o(a.indentAttributes))),T=t.indentalign,e=t.indentshift,r=t.indentalignfirst,n=t.indentshiftfirst;return"indentalign"!==r&&(T=r),"auto"===T&&(T=this.jax.options.displayAlign),"indentshift"!==n&&(e=n),"auto"===e&&(e=this.jax.options.displayIndent,"right"!==T||e.match(/^\s*0[a-z]*\s*$/)||(e=("-"+e.trim()).replace(/^--/,""))),[T,this.length2em(e,this.metrics.containerWidth)]},t.prototype.getAlignX=function(Q,t,T){return"right"===T?Q-(t.w+t.R)*t.rscale:"left"===T?t.L*t.rscale:(Q-t.w*t.rscale)/2},t.prototype.getAlignY=function(Q,t,T,e,r){return"top"===r?Q-T:"bottom"===r?e-t:"center"===r?(Q-T-(t-e))/2:0},t.prototype.getWrapWidth=function(Q){return this.childNodes[Q].getBBox().w},t.prototype.getChildAlign=function(Q){return"left"},t.prototype.percent=function(Q){return c.percent(Q)},t.prototype.em=function(Q){return c.em(Q)},t.prototype.px=function(Q,t){return void 0===t&&(t=-c.BIGDIMEN),c.px(Q,t,this.metrics.em)},t.prototype.length2em=function(Q,t,T){return void 0===t&&(t=1),void 0===T&&(T=null),null===T&&(T=this.bbox.scale),c.length2em(Q,t,T,this.jax.pxPerEm)},t.prototype.unicodeChars=function(Q,t){void 0===t&&(t=this.variant);var T=l.unicodeChars(Q),e=this.font.getVariant(t);if(e&&e.chars){var r=e.chars;T=T.map((function(Q){return((r[Q]||[])[3]||{}).smp||Q}))}return T},t.prototype.remapChars=function(Q){return Q},t.prototype.mmlText=function(Q){return this.node.factory.create("text").setText(Q)},t.prototype.mmlNode=function(Q,t,T){return void 0===t&&(t={}),void 0===T&&(T=[]),this.node.factory.create(Q,t,T)},t.prototype.createMo=function(Q){var t=this.node.factory,T=t.create("text").setText(Q),e=t.create("mo",{stretchy:!0},[T]);e.inheritAttributesFrom(this.node);var r=this.wrap(e);return r.parent=this,r},t.prototype.getVariantChar=function(Q,t){var T=this.font.getChar(Q,t)||[0,0,0,{unknown:!0}];return 3===T.length&&(T[3]={}),T},t.kind="unknown",t.styles={},t.removeStyles=["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","font"],t.skipAttributes={fontfamily:!0,fontsize:!0,fontweight:!0,fontstyle:!0,color:!0,background:!0,class:!0,href:!0,style:!0,xmlns:!0},t.BOLDVARIANTS={bold:{normal:"bold",italic:"bold-italic",fraktur:"bold-fraktur",script:"bold-script","sans-serif":"bold-sans-serif","sans-serif-italic":"sans-serif-bold-italic"},normal:{bold:"normal","bold-italic":"italic","bold-fraktur":"fraktur","bold-script":"script","bold-sans-serif":"sans-serif","sans-serif-bold-italic":"sans-serif-italic"}},t.ITALICVARIANTS={italic:{normal:"italic",bold:"bold-italic","sans-serif":"sans-serif-italic","bold-sans-serif":"sans-serif-bold-italic"},normal:{italic:"normal","bold-italic":"bold","sans-serif-italic":"sans-serif","sans-serif-bold-italic":"bold-sans-serif"}},t}(s.AbstractWrapper);t.CommonWrapper=d},4420:function(Q,t,T){var e,r=this&&this.__extends||(e=function(Q,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,t){Q.__proto__=t}||function(Q,t){for(var T in t)Object.prototype.hasOwnProperty.call(t,T)&&(Q[T]=t[T])})(Q,t)},function(Q,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function T(){this.constructor=Q}e(Q,t),Q.prototype=null===t?Object.create(t):(T.prototype=t.prototype,new T)});Object.defineProperty(t,"__esModule",{value:!0}),t.CommonWrapperFactory=void 0;var n=function(Q){function t(){var t=null!==Q&&Q.apply(this,arguments)||this;return t.jax=null,t}return r(t,Q),Object.defineProperty(t.prototype,"Wrappers",{get:function(){return this.node},enumerable:!1,configurable:!0}),t.defaultNodes={},t}(T(3811).AbstractWrapperFactory);t.CommonWrapperFactory=n},9800:function(Q,t,T){var e,r=this&&this.__extends||(e=function(Q,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,t){Q.__proto__=t}||function(Q,t){for(var T in t)Object.prototype.hasOwnProperty.call(t,T)&&(Q[T]=t[T])})(Q,t)},function(Q,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function T(){this.constructor=Q}e(Q,t),Q.prototype=null===t?Object.create(t):(T.prototype=t.prototype,new T)});Object.defineProperty(t,"__esModule",{value:!0}),t.CommonTeXAtomMixin=void 0;var n=T(9007);t.CommonTeXAtomMixin=function(Q){return function(Q){function t(){return null!==Q&&Q.apply(this,arguments)||this}return r(t,Q),t.prototype.computeBBox=function(t,T){if(void 0===T&&(T=!1),Q.prototype.computeBBox.call(this,t,T),this.childNodes[0]&&this.childNodes[0].bbox.ic&&(t.ic=this.childNodes[0].bbox.ic),this.node.texClass===n.TEXCLASS.VCENTER){var e=t.h,r=(e+t.d)/2+this.font.params.axis_height-e;t.h+=r,t.d-=r}},t}(Q)}},1160:function(Q,t){var T,e=this&&this.__extends||(T=function(Q,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,t){Q.__proto__=t}||function(Q,t){for(var T in t)Object.prototype.hasOwnProperty.call(t,T)&&(Q[T]=t[T])})(Q,t)},function(Q,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=Q}T(Q,t),Q.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),r=this&&this.__values||function(Q){var t="function"==typeof Symbol&&Symbol.iterator,T=t&&Q[t],e=0;if(T)return T.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&e>=Q.length&&(Q=void 0),{value:Q&&Q[e++],done:!Q}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(Q,t){var T="function"==typeof Symbol&&Q[Symbol.iterator];if(!T)return Q;var e,r,n=T.call(Q),o=[];try{for(;(void 0===t||t-- >0)&&!(e=n.next()).done;)o.push(e.value)}catch(Q){r={error:Q}}finally{try{e&&!e.done&&(T=n.return)&&T.call(n)}finally{if(r)throw r.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonTextNodeMixin=void 0,t.CommonTextNodeMixin=function(Q){return function(Q){function t(){return null!==Q&&Q.apply(this,arguments)||this}return e(t,Q),t.prototype.computeBBox=function(Q,t){var T,e;void 0===t&&(t=!1);var o=this.parent.variant,i=this.node.getText();if("-explicitFont"===o){var s=this.jax.getFontData(this.parent.styles),a=this.jax.measureText(i,o,s),l=a.w,c=a.h,u=a.d;Q.h=c,Q.d=u,Q.w=l}else{var L=this.remappedText(i,o);Q.empty();try{for(var p=r(L),h=p.next();!h.done;h=p.next()){var f=h.value,d=n(this.getVariantChar(o,f),4),H=(c=d[0],u=d[1],l=d[2],d[3]);if(H.unknown){var y=this.jax.measureText(String.fromCodePoint(f),o);l=y.w,c=y.h,u=y.d}Q.w+=l,c>Q.h&&(Q.h=c),u>Q.d&&(Q.d=u),Q.ic=H.ic||0,Q.sk=H.sk||0,Q.dx=H.dx||0}}catch(Q){T={error:Q}}finally{try{h&&!h.done&&(e=p.return)&&e.call(p)}finally{if(T)throw T.error}}L.length>1&&(Q.sk=0),Q.clean()}},t.prototype.remappedText=function(Q,t){var T=this.parent.stretch.c;return T?[T]:this.parent.remapChars(this.unicodeChars(Q,t))},t.prototype.getStyles=function(){},t.prototype.getVariant=function(){},t.prototype.getScale=function(){},t.prototype.getSpace=function(){},t}(Q)}},1956:function(Q,t,T){var e,r=this&&this.__extends||(e=function(Q,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,t){Q.__proto__=t}||function(Q,t){for(var T in t)Object.prototype.hasOwnProperty.call(t,T)&&(Q[T]=t[T])})(Q,t)},function(Q,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function T(){this.constructor=Q}e(Q,t),Q.prototype=null===t?Object.create(t):(T.prototype=t.prototype,new T)}),n=this&&this.__read||function(Q,t){var T="function"==typeof Symbol&&Q[Symbol.iterator];if(!T)return Q;var e,r,n=T.call(Q),o=[];try{for(;(void 0===t||t-- >0)&&!(e=n.next()).done;)o.push(e.value)}catch(Q){r={error:Q}}finally{try{e&&!e.done&&(T=n.return)&&T.call(n)}finally{if(r)throw r.error}}return o},o=this&&this.__spreadArray||function(Q,t){for(var T=0,e=t.length,r=Q.length;T<e;T++,r++)Q[r]=t[T];return Q};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonMactionMixin=t.TooltipData=void 0;var i=T(505);t.TooltipData={dx:".2em",dy:".1em",postDelay:600,clearDelay:100,hoverTimer:new Map,clearTimer:new Map,stopTimers:function(Q,t){t.clearTimer.has(Q)&&(clearTimeout(t.clearTimer.get(Q)),t.clearTimer.delete(Q)),t.hoverTimer.has(Q)&&(clearTimeout(t.hoverTimer.get(Q)),t.hoverTimer.delete(Q))}},t.CommonMactionMixin=function(Q){return function(Q){function T(){for(var t=[],T=0;T<arguments.length;T++)t[T]=arguments[T];var e=Q.apply(this,o([],n(t)))||this,r=e.constructor.actions,i=e.node.attributes.get("actiontype"),s=n(r.get(i)||[function(Q,t){},{}],2),a=s[0],l=s[1];return e.action=a,e.data=l,e.getParameters(),e}return r(T,Q),Object.defineProperty(T.prototype,"selected",{get:function(){var Q=this.node.attributes.get("selection"),t=Math.max(1,Math.min(this.childNodes.length,Q))-1;return this.childNodes[t]||this.wrap(this.node.selected)},enumerable:!1,configurable:!0}),T.prototype.getParameters=function(){var Q=this.node.attributes.get("data-offsets"),T=n(i.split(Q||""),2),e=T[0],r=T[1];this.dx=this.length2em(e||t.TooltipData.dx),this.dy=this.length2em(r||t.TooltipData.dy)},T.prototype.computeBBox=function(Q,t){void 0===t&&(t=!1),Q.updateFrom(this.selected.getBBox()),this.selected.setChildPWidths(t)},T}(Q)}},7490:function(Q,t){var T,e=this&&this.__extends||(T=function(Q,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,t){Q.__proto__=t}||function(Q,t){for(var T in t)Object.prototype.hasOwnProperty.call(t,T)&&(Q[T]=t[T])})(Q,t)},function(Q,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=Q}T(Q,t),Q.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(t,"__esModule",{value:!0}),t.CommonMathMixin=void 0,t.CommonMathMixin=function(Q){return function(Q){function t(){return null!==Q&&Q.apply(this,arguments)||this}return e(t,Q),t.prototype.getWrapWidth=function(Q){return this.parent?this.getBBox().w:this.metrics.containerWidth/this.jax.pxPerEm},t}(Q)}},7313:function(Q,t,T){var e,r=this&&this.__extends||(e=function(Q,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,t){Q.__proto__=t}||function(Q,t){for(var T in t)Object.prototype.hasOwnProperty.call(t,T)&&(Q[T]=t[T])})(Q,t)},function(Q,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function T(){this.constructor=Q}e(Q,t),Q.prototype=null===t?Object.create(t):(T.prototype=t.prototype,new T)}),n=this&&this.__read||function(Q,t){var T="function"==typeof Symbol&&Q[Symbol.iterator];if(!T)return Q;var e,r,n=T.call(Q),o=[];try{for(;(void 0===t||t-- >0)&&!(e=n.next()).done;)o.push(e.value)}catch(Q){r={error:Q}}finally{try{e&&!e.done&&(T=n.return)&&T.call(n)}finally{if(r)throw r.error}}return o},o=this&&this.__spreadArray||function(Q,t){for(var T=0,e=t.length,r=Q.length;T<e;T++,r++)Q[r]=t[T];return Q},i=this&&this.__values||function(Q){var t="function"==typeof Symbol&&Symbol.iterator,T=t&&Q[t],e=0;if(T)return T.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&e>=Q.length&&(Q=void 0),{value:Q&&Q[e++],done:!Q}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonMencloseMixin=void 0;var s=T(5552),a=T(505);t.CommonMencloseMixin=function(Q){return function(Q){function t(){for(var t=[],T=0;T<arguments.length;T++)t[T]=arguments[T];var e=Q.apply(this,o([],n(t)))||this;return e.notations={},e.renderChild=null,e.msqrt=null,e.padding=s.PADDING,e.thickness=s.THICKNESS,e.arrowhead={x:s.ARROWX,y:s.ARROWY,dx:s.ARROWDX},e.TRBL=[0,0,0,0],e.getParameters(),e.getNotations(),e.removeRedundantNotations(),e.initializeNotations(),e.TRBL=e.getBBoxExtenders(),e}return r(t,Q),t.prototype.getParameters=function(){var Q=this.node.attributes,t=Q.get("data-padding");void 0!==t&&(this.padding=this.length2em(t,s.PADDING));var T=Q.get("data-thickness");void 0!==T&&(this.thickness=this.length2em(T,s.THICKNESS));var e=Q.get("data-arrowhead");if(void 0!==e){var r=n(a.split(e),3),o=r[0],i=r[1],l=r[2];this.arrowhead={x:o?parseFloat(o):s.ARROWX,y:i?parseFloat(i):s.ARROWY,dx:l?parseFloat(l):s.ARROWDX}}},t.prototype.getNotations=function(){var Q,t,T=this.constructor.notations;try{for(var e=i(a.split(this.node.attributes.get("notation"))),r=e.next();!r.done;r=e.next()){var n=r.value,o=T.get(n);o&&(this.notations[n]=o,o.renderChild&&(this.renderChild=o.renderer))}}catch(t){Q={error:t}}finally{try{r&&!r.done&&(t=e.return)&&t.call(e)}finally{if(Q)throw Q.error}}},t.prototype.removeRedundantNotations=function(){var Q,t,T,e;try{for(var r=i(Object.keys(this.notations)),n=r.next();!n.done;n=r.next()){var o=n.value;if(this.notations[o]){var s=this.notations[o].remove||"";try{for(var a=(T=void 0,i(s.split(/ /))),l=a.next();!l.done;l=a.next()){var c=l.value;delete this.notations[c]}}catch(Q){T={error:Q}}finally{try{l&&!l.done&&(e=a.return)&&e.call(a)}finally{if(T)throw T.error}}}}}catch(t){Q={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(Q)throw Q.error}}},t.prototype.initializeNotations=function(){var Q,t;try{for(var T=i(Object.keys(this.notations)),e=T.next();!e.done;e=T.next()){var r=e.value,n=this.notations[r].init;n&&n(this)}}catch(t){Q={error:t}}finally{try{e&&!e.done&&(t=T.return)&&t.call(T)}finally{if(Q)throw Q.error}}},t.prototype.computeBBox=function(Q,t){void 0===t&&(t=!1);var T=n(this.TRBL,4),e=T[0],r=T[1],o=T[2],i=T[3],s=this.childNodes[0].getBBox();Q.combine(s,i,0),Q.h+=e,Q.d+=o,Q.w+=r,this.setChildPWidths(t)},t.prototype.getBBoxExtenders=function(){var Q,t,T=[0,0,0,0];try{for(var e=i(Object.keys(this.notations)),r=e.next();!r.done;r=e.next()){var n=r.value;this.maximizeEntries(T,this.notations[n].bbox(this))}}catch(t){Q={error:t}}finally{try{r&&!r.done&&(t=e.return)&&t.call(e)}finally{if(Q)throw Q.error}}return T},t.prototype.getPadding=function(){var Q,t,T=this,e=[0,0,0,0];try{for(var r=i(Object.keys(this.notations)),n=r.next();!n.done;n=r.next()){var o=n.value,s=this.notations[o].border;s&&this.maximizeEntries(e,s(this))}}catch(t){Q={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(Q)throw Q.error}}return[0,1,2,3].map((function(Q){return T.TRBL[Q]-e[Q]}))},t.prototype.maximizeEntries=function(Q,t){for(var T=0;T<Q.length;T++)Q[T]<t[T]&&(Q[T]=t[T])},t.prototype.getOffset=function(Q){var t=n(this.TRBL,4),T=t[0],e=t[1],r=t[2],o=t[3],i=("X"===Q?e-o:r-T)/2;return Math.abs(i)>.001?i:0},t.prototype.getArgMod=function(Q,t){return[Math.atan2(t,Q),Math.sqrt(Q*Q+t*t)]},t.prototype.arrow=function(Q,t,T,e,r){return void 0===e&&(e=""),void 0===r&&(r=0),null},t.prototype.arrowData=function(){var Q=n([this.padding,this.thickness],2),t=Q[0],T=Q[1]*(this.arrowhead.x+Math.max(1,this.arrowhead.dx)),e=this.childNodes[0].getBBox(),r=e.h,o=e.d,i=e.w,s=r+o,a=Math.sqrt(s*s+i*i),l=Math.max(t,T*i/a),c=Math.max(t,T*s/a),u=n(this.getArgMod(i+2*l,s+2*c),2);return{a:u[0],W:u[1],x:l,y:c}},t.prototype.arrowAW=function(){var Q=this.childNodes[0].getBBox(),t=Q.h,T=Q.d,e=Q.w,r=n(this.TRBL,4),o=r[0],i=r[1],s=r[2],a=r[3];return this.getArgMod(a+e+i,o+t+T+s)},t.prototype.createMsqrt=function(Q){var t=this.node.factory.create("msqrt");t.inheritAttributesFrom(this.node),t.childNodes[0]=Q.node;var T=this.wrap(t);return T.parent=this,T},t.prototype.sqrtTRBL=function(){var Q=this.msqrt.getBBox(),t=this.msqrt.childNodes[0].getBBox();return[Q.h-t.h,0,Q.d-t.d,Q.w-t.w]},t}(Q)}},7555:function(Q,t){var T,e=this&&this.__extends||(T=function(Q,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,t){Q.__proto__=t}||function(Q,t){for(var T in t)Object.prototype.hasOwnProperty.call(t,T)&&(Q[T]=t[T])})(Q,t)},function(Q,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=Q}T(Q,t),Q.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),r=this&&this.__read||function(Q,t){var T="function"==typeof Symbol&&Q[Symbol.iterator];if(!T)return Q;var e,r,n=T.call(Q),o=[];try{for(;(void 0===t||t-- >0)&&!(e=n.next()).done;)o.push(e.value)}catch(Q){r={error:Q}}finally{try{e&&!